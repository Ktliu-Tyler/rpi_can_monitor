<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NTURT Dynamic Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/static/dashboard.css">
    <script src="/static/main.js"></script>
</head>
<body class="min-h-screen">
    <!-- Connection Status -->
    <div id="connection-status" class="connection-indicator disconnected">
        <span id="connection-text">Connecting...</span>
    </div>

    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <div class="glass-card rounded-lg p-6 mb-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-4xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">
                        NTURT Dynamic Dashboard
                    </h1>
                    <p class="text-slate-400 mt-2">Real-time Racing Telemetry System</p>
                </div>
                <div class="text-right">
                    <div class="text-sm text-slate-400">Messages</div>
                    <div id="message-count" class="text-3xl font-bold text-cyan-400">0</div>
                    <div class="text-xs text-slate-500" id="last-update">Waiting for data...</div>
                </div>
            </div>
        </div>
        <!-- Playback Controls -->
        <div id="floating-controls" class="floating-control-panel">
            <div class="floating-header">
                <h3 class="floating-title">PLAYER CONTROL</h3>
                <div class="floating-actions">
                    <button id="minimize-btn" class="control-action-btn" title="Xs">‚ûñ</button>
                    <button id="close-btn" class="control-action-btn" title="close">‚úñÔ∏è</button>
                </div>
            </div>
            
            <div id="control-content" class="floating-content">
                <div class="control-row">
                    <div class="control-group">
                        <button id="play-pause-btn" class="control-btn primary">
                            ‚è∏Ô∏è STOP
                        </button>
                        <button id="backward-btn" class="control-btn secondary">
                            ‚è™ -10s
                        </button>
                        <button id="forward-btn" class="control-btn secondary">
                            ‚è© +10s
                        </button>
                    </div>
                </div>
                
                <div class="control-row">
                    <div class="control-group">
                        <label class="control-label">SPEED:</label>
                        <select id="speed-select" class="control-select">
                            <option value="0.1">0.1x</option>
                            <option value="0.5">0.5x</option>
                            <option value="1" selected>1x</option>
                            <option value="2">2x</option>
                            <option value="5">5x</option>
                            <option value="10">10x</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">FILE:</label>
                        <select id="file-select" class="control-select">
                            <option value="">Loading...</option>
                        </select>
                    </div>
                </div>
                
                <div class="control-row">
                    <div class="progress-container">
                        <div class="time-display">
                            <span id="current-time" class="time-text">00:00</span>
                            <span id="total-time" class="time-text">00:00</span>
                        </div>
                        <input type="range" id="progress-bar" min="0" max="100" value="0" 
                            class="progress-slider">
                    </div>
                </div>
            </div>
        </div>

        <!-- Êá∏ÊµÆÊéßÂà∂Èù¢ÊùøËß∏ÁôºÊåâÈàï -->
        <button id="show-controls-btn" class="show-controls-btn" style="display: none;">
            üéÆ CONTROL PANEL
        </button>
        <!-- Main Speed and Controls Section -->
        <div class="glass-card rounded-lg p-8 mb-6">
            <div class="flex items-center justify-center space-x-12">
                
                 <!-- RL Motor -->
                <div class="text-center">
                    <div class="mini-gauge">
                        <div class="mini-circular-gauge" id="rpm-rl-gauge">
                            <div class="mini-gauge-inner">
                                <div id="rpm-rl-value" class="text-lg font-bold text-green-400">0</div>
                                <div class="text-lg text-slate-400">RPM</div>
                            </div>
                        </div>
                    </div>
                    <div class="text-sm font-bold text-cyan-400 mt-1">RL Motor</div>
                    <div class="text-sm font-bold text-cyan-400 mt-1" id="speed-rl-value">0 km/h</div>
                </div>

                
                <!-- APPS Bar -->
                <div class="flex flex-col items-center">
                    <div class="vertical-bar apps-bar">
                        <div class="bar-fill" id="apps-fill" style="height: 0%"></div>
                    </div>
                    <div class="mt-4 text-center">
                        <div class="text-lg font-bold text-green-400">APPS</div>
                        <div id="apps-value" class="text-2xl font-mono text-green-300">0%</div>
                    </div>
                </div>

                <!-- Speed Gauge -->
                <div class="flex flex-col items-center">
                    <div class="speed-gauge">
                        <div class="circular-gauge" id="speed-gauge">
                            <div class="gauge-inner">
                                <div id="speed-value" class="text-4xl font-bold text-white mb-2">0</div>
                                <div class="text-lg text-slate-400 mb-2">km/h</div>
                                <div class="text-sm text-slate-500">
                                    <span id="rpm-value">0</span> RPM
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4 text-center">
                        <div class="text-xl font-bold text-blue-400">Vehicle Speed</div>
                    </div>
                </div>

                <!-- Brake Bar -->
                <div class="flex flex-col items-center">
                    <div class="vertical-bar brake-bar">
                        <div class="bar-fill" id="brake-fill" style="height: 0%"></div>
                    </div>
                    <div class="mt-4 text-center">
                        <div class="text-lg font-bold text-red-400">BRAKE</div>
                        <div id="brake-value" class="text-2xl font-mono text-red-300">0%</div>
                    </div>
                </div>
                <!-- RR Motor -->
                <div class="text-center">
                    <div class="mini-gauge">
                        <div class="mini-circular-gauge" id="rpm-rr-gauge">
                            <div class="mini-gauge-inner">
                                <div id="rpm-rr-value" class="text-lg font-bold text-green-400">0</div>
                                <div class="text-lg text-slate-400">RPM</div>
                            </div>
                        </div>
                    </div>
                    <div class="text-sm font-bold text-cyan-400 mt-1">RR Motor</div>
                    <div class="text-sm font-bold text-cyan-400 mt-1" id="speed-rr-value">0 km/h</div>
                </div>
            </div>
        </div>
        <!-- Charts Row -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Torque Chart -->
            <div class="glass-card rounded-lg p-6">
                <h3 class="text-xl font-bold mb-4 text-purple-400">Torque Over Time</h3>
                <div class="chart-container">
                    <canvas id="torque-chart"></canvas>
                </div>
            </div>

            <!-- RPM Chart -->
            <div class="glass-card rounded-lg p-6">
                <h3 class="text-xl font-bold mb-4 text-green-400">RPM Over Time</h3>
                <div class="chart-container">
                    <canvas id="rpm-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- Inverters Status -->
        <div class="glass-card rounded-lg p-6 mb-6">
            <h3 class="text-xl font-bold mb-4 flex items-center">
                <span class="w-3 h-3 bg-purple-500 rounded-full mr-2"></span>
                Inverters Status
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- FL Inverter -->
                <div class="bg-slate-800 rounded-lg p-4">
                    <div class="flex items-center justify-between mb-3">
                        <span class="font-bold text-purple-400">FL</span>
                        <span class="heartbeat-indicator heartbeat-fail" data-inv="1"></span>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-slate-400">Status:</span>
                            <span class="inv-status text-xs">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">Torque:</span>
                            <span class="inv-torque font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">DC V:</span>
                            <span class="inv-dc-voltage font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">DC I:</span>
                            <span class="inv-dc-current font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">MOS T:</span>
                            <span class="inv-mos-temp font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">MCU T:</span>
                            <span class="inv-mcu-temp font-mono">N/A</span>
                        </div>
                    </div>
                </div>

                <!-- FR Inverter -->
                <div class="bg-slate-800 rounded-lg p-4">
                    <div class="flex items-center justify-between mb-3">
                        <span class="font-bold text-purple-400">FR</span>
                        <span class="heartbeat-indicator heartbeat-fail" data-inv="2"></span>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-slate-400">Status:</span>
                            <span class="inv-status text-xs">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">Torque:</span>
                            <span class="inv-torque font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">DC V:</span>
                            <span class="inv-dc-voltage font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">DC I:</span>
                            <span class="inv-dc-current font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">MOS T:</span>
                            <span class="inv-mos-temp font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">MCU T:</span>
                            <span class="inv-mcu-temp font-mono">N/A</span>
                        </div>
                    </div>
                </div>

                <!-- RL Inverter -->
                <div class="bg-slate-800 rounded-lg p-4">
                    <div class="flex items-center justify-between mb-3">
                        <span class="font-bold text-purple-400">RL</span>
                        <span class="heartbeat-indicator heartbeat-fail" data-inv="3"></span>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-slate-400">Status:</span>
                            <span class="inv-status text-xs">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">Torque:</span>
                            <span class="inv-torque font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">DC V:</span>
                            <span class="inv-dc-voltage font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">DC I:</span>
                            <span class="inv-dc-current font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">MOS T:</span>
                            <span class="inv-mos-temp font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">MCU T:</span>
                            <span class="inv-mcu-temp font-mono">N/A</span>
                        </div>
                    </div>
                </div>

                <!-- RR Inverter -->
                <div class="bg-slate-800 rounded-lg p-4">
                    <div class="flex items-center justify-between mb-3">
                        <span class="font-bold text-purple-400">RR</span>
                        <span class="heartbeat-indicator heartbeat-fail" data-inv="4"></span>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-slate-400">Status:</span>
                            <span class="inv-status text-xs">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">Torque:</span>
                            <span class="inv-torque font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">DC V:</span>
                            <span class="inv-dc-voltage font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">DC I:</span>
                            <span class="inv-dc-current font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">MOS T:</span>
                            <span class="inv-mos-temp font-mono">N/A</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">MCU T:</span>
                            <span class="inv-mcu-temp font-mono">N/A</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="glass-card rounded-lg p-4 text-center">
            <p class="text-slate-400">NTURT Racing Team - Dynamic Dashboard v3.0</p>
        </div>
    </div>
</body>
</html>